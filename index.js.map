{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com';\nconst myApiKey = '49271250-6e2a7e536995fb461bd1f8f83';\n\nexport async function getImagesList(userInput, pageNumber, perPage) {\n  return axios.get('/api/', {\n    params: {\n      key: myApiKey,\n      q: userInput,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      per_page: perPage,\n      page: pageNumber,\n    },\n  });\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst simpleLightboxInstance = new SimpleLightbox('.gallery-link', {\n  captionDelay: 250,\n  captionsData: 'alt',\n});\n\nconst galleryListEl = document.querySelector('.gallery');\nconst inputEl = document.querySelector('input[name = search-text]');\nconst loaderEl = document.querySelector('.visually-hidden');\nconst moreButton = document.querySelector('.more-button');\n\nexport function addLoader() {\n  loaderEl.classList.remove('visually-hidden');\n}\n\nexport function clearGallery() {\n  galleryListEl.innerHTML = '';\n}\n\nexport function hideButton() {\n  moreButton.style.display = 'none';\n}\n\nexport function removeLoader() {\n  loaderEl.classList.add('visually-hidden');\n}\n\nexport function showButton() {\n  moreButton.style.display = 'block';\n}\n\nexport function addImagesMarkup(imagesHits) {\n  const markup = imagesHits\n    .map(hit => {\n      return `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${hit.largeImageURL}\">\n            <img src=\"${hit.webformatURL}\" alt=\"${hit.tags}\" title=\"\"/>\n          </a>\n          <table>\n            <thead>\n              <tr>\n                <th>Likes</th>\n                <th>Views</th>\n                <th>Comments</th>\n                <th>Downloads</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr>\n                <td>${hit.likes}</td>\n                <td>${hit.views}</td>\n                <td>${hit.comments}</td>\n                <td>${hit.downloads}</td>\n              </tr>\n            </tbody>\n          </table>\n\n        </li>`;\n    })\n    .join('');\n\n  galleryListEl.insertAdjacentHTML('beforeend', markup);\n  simpleLightboxInstance.refresh();\n  inputEl.value = '';\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getImagesList } from './js/pixabay-api';\nimport { addLoader } from './js/render-functions';\nimport {\n  removeLoader,\n  showButton,\n  hideButton,\n  clearGallery,\n} from './js/render-functions';\nimport { addImagesMarkup } from './js/render-functions';\n\nconst perPage = 15;\n\nconst formEl = document.querySelector('.form');\nconst inputEl = document.querySelector('input[name = search-text]');\n\nconst moreButton = document.querySelector('.more-button');\n\nlet userInput = '';\n\nlet pageNumber = 1;\n\nformEl.addEventListener('submit', async event => {\n  event.preventDefault();\n  userInput = inputEl.value.trim();\n  if (userInput === '') {\n    return;\n  }\n  clearGallery();\n  addLoader();\n  hideButton();\n\n  try {\n    pageNumber = 1;\n    const response = await getImagesList(userInput, pageNumber, perPage);\n\n    if (response.data.hits.length === 0) {\n      iziToast.error({\n        position: 'topRight',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    } else {\n      addImagesMarkup(response.data.hits);\n\n      if (response.data.hits.length >= perPage) {\n        showButton();\n      }\n    }\n  } catch (error) {\n    console.log(error);\n  }\n\n  removeLoader();\n});\n\nmoreButton.addEventListener('click', async event => {\n  hideButton();\n  pageNumber += 1;\n  const images = await getImagesList(userInput, pageNumber, perPage);\n\n  addLoader();\n\n  addImagesMarkup(images.data.hits);\n\n  const galleryItem = document.querySelector('.gallery-item');\n  const domRect = galleryItem.getBoundingClientRect();\n  const galleryItemHeight = domRect.height;\n  window.scrollBy({\n    top: galleryItemHeight * 2,\n    behavior: 'smooth',\n  });\n  removeLoader();\n\n  let numberOfImagesDisplayed = pageNumber * perPage;\n\n  if (numberOfImagesDisplayed >= images.data.totalHits) {\n    iziToast.error({\n      position: 'topRight',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  } else {\n    showButton();\n  }\n});\n"],"names":["axios","myApiKey","getImagesList","userInput","pageNumber","perPage","simpleLightboxInstance","SimpleLightbox","galleryListEl","inputEl","loaderEl","moreButton","addLoader","clearGallery","hideButton","removeLoader","showButton","addImagesMarkup","imagesHits","markup","hit","formEl","event","response","iziToast","error","images","galleryItemHeight"],"mappings":"owBAEAA,EAAM,SAAS,QAAU,sBACzB,MAAMC,EAAW,qCAEV,eAAeC,EAAcC,EAAWC,EAAYC,EAAS,CAClE,OAAOL,EAAM,IAAI,QAAS,CACxB,OAAQ,CACN,IAAKC,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAUE,EACV,KAAMD,CACP,CACL,CAAG,CACH,CCdA,MAAME,EAAyB,IAAIC,EAAe,gBAAiB,CACjE,aAAc,IACd,aAAc,KAChB,CAAC,EAEKC,EAAgB,SAAS,cAAc,UAAU,EACjDC,EAAU,SAAS,cAAc,2BAA2B,EAC5DC,EAAW,SAAS,cAAc,kBAAkB,EACpDC,EAAa,SAAS,cAAc,cAAc,EAEjD,SAASC,GAAY,CAC1BF,EAAS,UAAU,OAAO,iBAAiB,CAC7C,CAEO,SAASG,GAAe,CAC7BL,EAAc,UAAY,EAC5B,CAEO,SAASM,GAAa,CAC3BH,EAAW,MAAM,QAAU,MAC7B,CAEO,SAASI,GAAe,CAC7BL,EAAS,UAAU,IAAI,iBAAiB,CAC1C,CAEO,SAASM,GAAa,CAC3BL,EAAW,MAAM,QAAU,OAC7B,CAEO,SAASM,EAAgBC,EAAY,CAC1C,MAAMC,EAASD,EACZ,IAAIE,GACI;AAAA,0CAC6BA,EAAI,aAAa;AAAA,wBACnCA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAapCA,EAAI,KAAK;AAAA,sBACTA,EAAI,KAAK;AAAA,sBACTA,EAAI,QAAQ;AAAA,sBACZA,EAAI,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,cAM9B,EACA,KAAK,EAAE,EAEVZ,EAAc,mBAAmB,YAAaW,CAAM,EACpDb,EAAuB,QAAO,EAC9BG,EAAQ,MAAQ,EAClB,CCrDA,MAAMJ,EAAU,GAEVgB,EAAS,SAAS,cAAc,OAAO,EACvCZ,EAAU,SAAS,cAAc,2BAA2B,EAE5DE,EAAa,SAAS,cAAc,cAAc,EAExD,IAAIR,EAAY,GAEZC,EAAa,EAEjBiB,EAAO,iBAAiB,SAAU,MAAMC,GAAS,CAG/C,GAFAA,EAAM,eAAc,EACpBnB,EAAYM,EAAQ,MAAM,OACtBN,IAAc,GAGlB,CAAAU,IACAD,IACAE,IAEA,GAAI,CACFV,EAAa,EACb,MAAMmB,EAAW,MAAMrB,EAAcC,EAAWC,EAAYC,CAAO,EAE/DkB,EAAS,KAAK,KAAK,SAAW,EAChCC,EAAS,MAAM,CACb,SAAU,WACV,QACE,0EACV,CAAO,GAEDP,EAAgBM,EAAS,KAAK,IAAI,EAE9BA,EAAS,KAAK,KAAK,QAAUlB,GAC/BW,IAGL,OAAQS,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CAEDV,IACF,CAAC,EAEDJ,EAAW,iBAAiB,QAAS,MAAMW,GAAS,CAClDR,IACAV,GAAc,EACd,MAAMsB,EAAS,MAAMxB,EAAcC,EAAWC,EAAYC,CAAO,EAEjEO,IAEAK,EAAgBS,EAAO,KAAK,IAAI,EAIhC,MAAMC,EAFc,SAAS,cAAc,eAAe,EAC9B,wBACM,OAClC,OAAO,SAAS,CACd,IAAKA,EAAoB,EACzB,SAAU,QACd,CAAG,EACDZ,IAE8BX,EAAaC,GAEZqB,EAAO,KAAK,UACzCF,EAAS,MAAM,CACb,SAAU,WACV,QAAS,4DACf,CAAK,EAEDR,GAEJ,CAAC"}